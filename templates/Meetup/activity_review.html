{% extends "Meetup/base.html" %}
{% load static %}

{% block extra_head %}
<link rel="stylesheet" href="{% static 'css/act_review.css' %}">
{% endblock %}

{% block content %}
<div class="container mt-5">

    {% if messages %}  <!-- if there are messages, display them -->
    <div class="mt-3">
        {% for message in messages %}  <!-- for loop to iterate through the messages -->
        <div class="alert {% if message.tags %}alert-{{ message.tags }}{% else %}alert-info{% endif %} alert-dismissible fade show"
            role="alert">
            {{ message }}  <!-- display the message -->
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
        {% endfor %}
    </div>
    {% endif %}

    <form method="POST" action="{% url 'activity_review' activity.id %}">
        {% csrf_token %}

        <div class="row align-items-start">
            <!-- Activity Details -->
            <div class="col-md-6">
                <h2 class="fw-bold">Activity name: {{ activity.title }}</h2>  <!-- display the activity name -->
                <p><strong>Activity ID:</strong> {{ activity.id }}</p>  <!-- display the activity id -->

                <!-- Rating Range (1-5) -->
                <label for="customRange1" class="form-label">Rating: <span id="ratingValue" class="ms-2">{{ reviews.score|default:3 }}</span></label>  <!-- display the rating value -->
                <input type="range" class="form-range" id="customRange1" name="rating" min="1" max="5" step="1"
                    value="{{ reviews.score|default:3 }}" oninput="updateRating(this.value)">  <!-- update the rating value -->

            </div>

            <!-- Activity Image -->
            <div class="col-md-6 text-center">
                <div class="activity-image border rounded d-flex align-items-center justify-content-center"
                    style="height: 150px;">
                    <p>Activity Image</p>  <!-- display the activity image -->
                </div>
            </div>
        </div>

        <!-- Review Form -->
        <div class="row mt-4">
            <div class="col-12">
                <h4>Your Feeling</h4>
                <textarea class="form-control review-text" rows="5" name="review_text"
                    placeholder="Add text">{{ reviews.review_text}}</textarea>  <!-- display the review text -->

                <div class="text-center mt-3">
                    <button type="submit" class="btn btn-dark">SEND</button>
                </div>
            </div>
        </div>

    </form>
</div>

<script>
    function updateRating(value) {
        document.getElementById('ratingValue').innerText = value;
    }
</script>
{% endblock %}