{% extends "Meetup/base.html" %}
{% load static %}

{% block extra_head %}

{% endblock %}
<link rel="stylesheet" href="{% static 'css/add_act.css' %}">
{% block content %}

<div class="container mt-5">
    <h2 class="text-center fw-bold">Modify Activity</h2>
    {% if messages %}  <!-- if there are messages -->
        <div class="mt-3">
            {% for message in messages %}  <!-- for loop to iterate through the messages -->
                <div class="alert {% if message.tags %}alert-{{ message.tags }}{% else %}alert-info{% endif %} alert-dismissible fade show" role="alert">
                    {{ message }}  <!-- display the message -->
                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                </div>
            {% endfor %}
        </div>
    {% endif %}


    <div class="row mt-4">
        <!-- Activity form -->
        <div class="col-md-14">
            <form method="POST" action="{% url 'modifyActivity' activity.id%}">
                {% csrf_token %}
                <!-- Name -->
                <div class="mb-3">
                    <label for="nameInput" class="form-label">Name</label>
                    <input type="text" class="form-control" id="nameInput" placeholder="Enter activity name" name="title" value="{{ activity.title }}" required>
                </div>

                <!-- Address -->
                <div class="mb-3">
                    <label for="addressInput" class="form-label">Location</label>
                    <input type="text" class="form-control" id="addressInput" placeholder="Enter UK adress (e.g Great Russell St, London WC1B 3DG)" value="{{ activity.location }}" name="location" required>
                </div>

                <div class="row">
                    <!-- Date -->
                    <div class="col-md-6 mb-3">
                        <label for="dateInput" class="form-label">Date</label>
                        <input type="date" class="form-control" id="dateInput" value="{{ activity.date_time|date:'Y-m-d' }}" name="date_time" required>
                    </div>

                    <!-- Category Dropdown -->
                    <div class="col-md-6 mb-3">
                        <label for="categoryInput" class="form-label">Category</label>
                        <select class="form-select" id="categoryInput" name="category" required>
                            <option selected disabled>Choose category</option>
                            {% for category in categories %}
                            <option value="{{ category.id }}" {% if activity.category.id == category.id %}selected{% endif %}>
                                {{ category|capfirst }}
                            </option>
                            {% endfor %}
                        </select>
                        {% if form.category.errors %}
                            <div class="text-danger">
                                {{ form.category.errors }}
                            </div>
                        {% endif %}
                    </div>

                </div>

                <!-- Number of people required -->
                <div class="mb-3">
                    <label for="peopleInput" class="form-label">Number of people required</label>
                    <input type="number" class="form-control" id="peopleInput" min="1" value="{{ activity.max_participants }}" name="max_participants" required>
                </div>

                <!-- Details -->
                <div class="mb-3">
                    <label for="detailInput" class="form-label">Detail</label>
                    <textarea class="form-control" id="detailInput" rows="4" placeholder="Enter activity details" name="description" required>{{ activity.description }}</textarea>
                </div>

                <!-- Buttons -->
                <div class="d-flex justify-content-end">
                    <button type="submit" class="btn btn-dark me-2">Modify</button>
                    <button type="button" class="btn btn-secondary" id="cancelButton">CANCEL</button>
                </div>
            </form>
        </div>
    </div>
</div>

<script>
    const activitiesUrl = "{% url 'activitiesmanage' %}";
</script>
<script src="{% static 'js/add_activity.js' %}"></script>

{% endblock %}
