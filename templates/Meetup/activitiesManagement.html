{% extends "Meetup/profile.html" %}
{% load static %}

{% block subContent %}
<nav>
  <div class="nav nav-tabs" id="nav-tab" role="tablist">
    <button class="nav-link active" id="nav-home-tab" data-bs-toggle="tab" data-bs-target="#nav-home" type="button"
      role="tab" aria-controls="nav-home" aria-selected="true">My Activities</button>
    <button class="nav-link" id="nav-profile-tab" data-bs-toggle="tab" data-bs-target="#nav-profile" type="button"
      role="tab" aria-controls="nav-profile" aria-selected="false">Activities you joined</button>
  </div>
</nav>

<div class="tab-content" id="nav-tabContent">
  <div class="tab-pane fade show active" id="nav-home" role="tabpanel" aria-labelledby="nav-home-tab" tabindex="0">
    <div class="list-group">
      {% for activity in my_activities_page_obj %}  <!-- for loop to iterate through the activities -->
      <a href="{% url 'modifyActivity' activity.id %}" class="list-group-item list-group-item-action">
        {{ activity.name }}  <!-- display the activity name -->
      </a>
      {% endfor %}
    </div>
    <div class="fixed-bottom">
      <nav aria-label="Page navigation example">
        <ul class="pagination justify-content-center">
          {% if my_activities_page_obj.has_previous %}  <!-- check if there is a previous page -->
          <li class="page-item"><a class="page-link" href="?my_activities_page={{ my_activities_page_obj.previous_page_number }}">Previous</a></li>
          {% endif %}
          {% for num in my_activities_page_obj.paginator.page_range %}  <!-- for loop to iterate through the pages -->
          <li class="page-item {% if my_activities_page_obj.number == num %}active{% endif %}"><a class="page-link" href="?my_activities_page={{ num }}">{{ num }}</a></li>
          {% endfor %}
          {% if my_activities_page_obj.has_next %}  <!-- check if there is a next page -->
          <li class="page-item"><a class="page-link" href="?my_activities_page={{ my_activities_page_obj.next_page_number }}">Next</a></li>
          {% endif %}
        </ul>
      </nav>
    </div>
  </div>

  <div class="tab-pane fade" id="nav-profile" role="tabpanel" aria-labelledby="nav-profile-tab" tabindex="0">
    <div class="list-group">
      {% for activity in joined_activities_page_obj %}  <!-- for loop to iterate through the activities -->
      <div class="list-group-item d-flex justify-content-between align-items-center">
        <!-- Left: Activity Name links to ActDetail -->
        <a href="{% url 'ActDetail' activity.id %}" class="text-decoration-none text-dark">
            {{ activity.name }}
        </a>
    
        <!-- Right: Button links to activity_review -->
        <a href="{% url 'activity_review' activity.id %}">
            <button class="btn btn-primary">Review</button>
        </a>
    </div>
      
      {% endfor %}
    </div>
    <div class="fixed-bottom">
      <nav aria-label="Page navigation example">
        <ul class="pagination justify-content-center">
          {% if joined_activities_page_obj.has_previous %}  <!-- check if there is a previous page -->
          <li class="page-item"><a class="page-link" href="?joined_activities_page={{ joined_activities_page_obj.previous_page_number }}">Previous</a></li>
          {% endif %}
          {% for num in joined_activities_page_obj.paginator.page_range %}  <!-- for loop to iterate through the pages -->
          <li class="page-item {% if joined_activities_page_obj.number == num %}active{% endif %}"><a class="page-link" href="?joined_activities_page={{ num }}">{{ num }}</a></li>
          {% endfor %}
          {% if joined_activities_page_obj.has_next %}  <!-- check if there is a next page -->
          <li class="page-item"><a class="page-link" href="?joined_activities_page={{ joined_activities_page_obj.next_page_number }}">Next</a></li>
          {% endif %}
        </ul>
      </nav>
    </div>
  </div>
</div>
{% endblock subContent %}